<?xml version='1.0' encoding='UTF-8'?>
<document>
	<title><![CDATA[Agréger des audits de code avec Sonar]]></title>
	<allow_com>0</allow_com>
	<template><![CDATA[article.php]]></template>
	<chapo><![CDATA[]]></chapo>
	<content><![CDATA[<p>Dans le monde du développement Java, on ne compte plus les outils de revue de code, d'audit ou de détection d'anomalies. Il devient dangereux de s'en passer pour un projet de développement de grande envergure. Ils sont autant de garde-fous qui proposent un angle de vue propre. Cependant, les installer, les paramétrer et interpréter leurs résultats est souvent complexe et prend du temps ! C'est là qu'est la plus-value de <a href="http://sonar.codehaus.org/">Sonar</a> : plus besoin de considérer les outils d'audit un par un, Sonar, logiciel Open Source de mesure de qualité de code propose de jouer le rôle d'interface.</p>

<p>Pour mieux comprendre son mode de fonctionnement : voyons-en l'architecture. Une fois installé et lancé, Sonar fournit une interface web qui propose les habituelles pages de configuration sur le port 9000 de la machine hôte. C'est ici que se fait le paramétrage des outils sous-jacents que l'on souhaite utiliser. La capture suivante montre la fine granularité de configuration mise à disposition.

<a href="http://08000linux.com/blogs/files/2009/12/01_config1.png"><img class="alignright size-full wp-image-2150" src="http://08000linux.com/blogs/files/2009/12/01_config1.png" alt="01_config" width="100%" /></a></p>

<p>Sonar recoupe les différents vérificateurs de code et analyse ainsi le code selon 6 axes :
<ul>
	<li>identification des duplications (CPD, PMD)</li>
	<li>mesure du niveau de documentation</li>
	<li>respect des règles de programmation (Checkstyle, PMD)</li>
	<li>détection des bugs potentiels (FindBugs)</li>
	<li>évaluation de la couverture de code par les tests unitaires (Cobertura, Clover, Emma, JUnit, Surefire)</li>
	<li>analyse de la répartition de la complexité</li>
</ul>
Une fois la configuration faite, les utilisateurs de Maven ne seront plus qu'à une commande de générer automatiquement tous les précieux rapports d'audit :

<code>mvn sonar:sonar</code>

Pour les projets qui ne seraient pas encore "mavenisés", Sonar propose <a href="http://docs.codehaus.org/display/SONAR/Collect+data#Collectdata-NonMavenprojects%28sonarlightmode%29">un tutoriel de quelques lignes</a> pour remédier au problème.</p>

<p>Toutes les informations collectées par Sonar et stockées dans sa base sont consultables via l'interface web. On y retrouvera donc clairement présentées toutes les métriques des outils sous-jacents utilisés comme on peut le voir dans les captures suivantes.

<a href="http://08000linux.com/blogs/files/2009/12/02_stats_01.png"><img class="alignleft size-full wp-image-2151" src="http://08000linux.com/blogs/files/2009/12/02_stats_01.png" alt="02_stats_01" width="100%" /></a>

<a href="http://08000linux.com/blogs/files/2009/12/03_stats_02.png"><img class="alignright size-full wp-image-2152" src="http://08000linux.com/blogs/files/2009/12/03_stats_02.png" alt="03_stats_02" width="100%" /></a></p>

<p>Sonar s'axe sur une politique de <a href="http://docs.codehaus.org/display/SONAR/Sonar+Plugin+Library/">plugins</a> qui élargit nettement le champ des outils d'audit supportés. On pourra donc s'appuyer sur ceux existant ou se lancer dans le codage d'un nouveau si le besoin s'en fait sentir. Pour plus d'information sur Sonar, se référer à la <a href="http://sonar.codehaus.org/documentation/">documentation officielle</a> très fournie ou à l'<a href="http://linsolas.developpez.com/articles/java/qualite/sonar/?page=page_7">article de developpez.com</a></p>

<em>Article publié sur <a href="http://linuxfr.org/~galaux/">LinuxFr</a> dans le cadre de mon activité professionnelle à <a href="http://linagora.com/">Linagora</a>.</em>]]></content>
	<tags><![CDATA[java,tests,development]]></tags>
</document>